<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" href="/dist/css/main.bundle.css" />
    <script src="/dist/js/main.bundle.js"></script>
    <title>Document</title>
  </head>
  <body style="height: 100vh">
    <h1 class="overflow-hidden">Main Page</h1>
    <div class="box">box</div>
    <div class="tab-container">
      <ul class="tab">
        <li class="tab__item">list</li>
      </ul>
    </div>

    <a href="" class="btn btn-primary">btn primary</a>
    <a href="" class="btn btn-danger">btn primary</a>
    <button type="button" class="btn btn-outline-danger">btn danger</button>
    <style>
      ul,
      li {
        list-style: none;
      }
    </style>
    <ul class="grid gap-10">
      <li class="g-col-6 g-col-md-4 g-col-xl-3">
        <div
          class="display-flex flex-direction-column border-all rounded-5 border-color-primary overflow-hidden"
        >
          <span class="height-25" style="background-color: #999"></span>
          <div class="display-flex flex-direction-column padding-10">
            <span class="font-weight-bold">Card title</span>
            <span class="mt-10"
              >Some quick example text to build on the card title and make up
              the bulk of the card's content.</span
            >
          </div>
        </div>
      </li>
      <li class="g-col-6 g-col-md-4 g-col-xl-3">
        <div
          class="display-flex flex-direction-column border-all rounded-5 border-color-primary overflow-hidden"
        >
          <span class="" style="height: 80px; background-color: #999"></span>
          <div
            class="pt-15 pl-15 pr-15 pb-15 display-flex flex-direction-column"
          >
            <span class="font-weight-bold">Card title</span>
            <span class="mt-15"
              >Some quick example text to build on the card title and make up
              the bulk of the card's content.</span
            >
          </div>
        </div>
      </li>
    </ul>

    <div class="c-dropdown" id="drop-1" tabindex="0"></div>
    <script>
      const options = {
        data: [
          {
            id: "",
            label: "선택하세요",
            selected: true,
          },
          {
            id: "0001",
            label: "Google",
          },
          {
            id: "0002",
            label: "Yahoo",
          },
        ],
      };
      const dropDown = new universe.DropDown({
        selector: "#drop-1",
        data: options.data,
      });

      // dropDown.backdrop.addEventListener("changeEvent", e => {
      //   console.log(e.detail);
      // });

      dropDown.onChange(val => {
        console.log("change", val);
      });
    </script>

    <div class="action-item">
      <p>Custom DropDown Test Item</p>
      <button class="details-btn">details</button>
      <button class="edit-btn">edit</button>
      <button class="delete-btn">delete</button>
    </div>

    <script>
      // function DialogBase(content = "", options = {}) {
      //   options = {
      //     title: "Dialog",
      //     submitLabel: "Submig",
      //     cancleLabel: "Cancle",
      //     allowClickOut: true,
      //     ...options,
      //   };

      //   const dialog = document.createElement("div");
      //   dialog.className = "dialog";
      //   dialog.innerHTML = `
      //     <div class="dialog-container"
      //       tabindex="0" role="dialog" aria-label="${options.title}">
      //       ${
      //         options.title
      //           ? `
      //         <div class="dialog-header">
      //           <h3>${options.title}</h3>
      //         </div>
      //         `
      //           : ""
      //       }
      //       <div class="dialog-content">
      //         ${content}
      //       </div>
      //       <div class="dialog-footer">
      //         <button type="button" class="cancel-btn">${
      //           options.cancelLabel || "Cancel"
      //         }</button>
      //         ${
      //           options.submitLabel
      //             ? `<button type="button" class="submit-btn">${options.submitLabel}</button>`
      //             : ""
      //         }
      //       </div>
      //     </div>
      //   `;

      //   const submitBtn = dialog.querySelector(".submit-btn");
      //   const cancelBtn = dialog.querySelector(".cancel-btn");
      //   const htmlContent = dialog.querySelector(".dialog-content");

      //   if (submitBtn) {
      //     submitBtn.addEventListener("click", () => {
      //       dialog.dispatchEvent(new Event("dialog-submit"));
      //       this.close();
      //     });
      //   }

      //   cancelBtn.addEventListener("click", () => {
      //     dialog.dispatchEvent(new Event("dialog-cancle"));
      //     this.close();
      //   });

      //   this.content = htmlContent;

      //   const handleClickOut = e => {
      //     if (e.target === dialog) {
      //       this.close();
      //     }
      //   };

      //   if (options.allowClickOut) {
      //     document.addEventListener("click", handleClickOut);
      //   }

      //   let data = {};
      //   this.updateData = (key, value) => {
      //     data[key] = value;
      //   };

      //   this.open = () => {
      //     document.body.appendChild(dialog);
      //   };

      //   this.close = () => {
      //     dialog.remove();
      //     document.removeEventListener("click", handleClickOut);
      //     dialog.dispatchEvent(new Event("dialog-closed"));
      //   };

      //   this.onClose = cb => {
      //     dialog.addEventListener("dialog-closed", cb);
      //   };

      //   this.onCancle = cb => {
      //     dialog.addEventListener("dialog-cancle", cb);
      //   };

      //   this.onSubmit = cb => {
      //     dialog.addEventListener("dialog-submit", () => cb(data));
      //   };
      // }

      //dialog.open();

      // dialog.onClose(() => {
      //   console.log('closed')
      // })
      // dialog.onSubmit((data) => {
      //   console.log('submit', data)
      // })
      // dialog.onCancle(() => {
      //   console.log('cancle')
      // })

      const item = document.querySelector(".action-item");
      const itemButtons = item.querySelectorAll("button");
      const [detailsBtn, editBtn, deleteBtn] = itemButtons;

      // function InputDialog(
      //   initialValut = "",
      //   options = { submitLabel: "Save" }
      // ) {
      //   DialogBase.apply(this, [
      //     `<input type="text" class="input-field" value="${initialValut}">`,
      //     options,
      //   ]);

      //   const field = this.content.querySelector(".input-field");
      //   field.addEventListener("input", e => {
      //     this.updateData("value", e.target.value);
      //   });

      //   this.onClose(() => {
      //     field.value = "";
      //   });
      // }

      // class InputDialog
      // class InputDialog extends DialogBase {
      //   constructor(initialValut = "", options = { submitLabel: "Save" }) {
      //     super(
      //       `<input type="text" class="input-field" value="${initialValut}">`,
      //       options
      //     );

      //     const field = this.content.querySelector(".input-field");
      //     field.addEventListener("input", e => {
      //       this.updateData("value", e.target.value);
      //     });

      //     this.onClose(() => {
      //       field.value = "";
      //     });
      //   }
      // }

      // function ConfirmDialog(description, options = { title: "Confirm" }) {
      //   DialogBase.apply(this, [
      //     `<p>${description}</p>`,
      //     { ...options, allowClickOut: false },
      //   ]);
      // }

      detailsBtn.addEventListener("click", () => {
        const item = new universe.DialogFrame();

        const dialog = new universe.Dialog(
          "<h3>Details</h3>" +
            "<p>This is some random details about th iteme</p>",
          {
            title: null,
            submitLabel: null,
            cancelLabel: "OK",
          }
        );
        item.addChild(dialog);
        dialog.open();
      });

      editBtn.addEventListener("click", () => {
        const dialog = new universe.InputDialog(item.children[0].textContent);
        dialog.open();

        dialog.onSubmit(data => {
          console.log(data.value);
          item.children[0].textContent = data.value;
        });
      });

      deleteBtn.addEventListener("click", () => {
        const dialog = new universe.ConfirmDialog(
          "Are you sure you want to delete this item?",
          {
            title: "Confirm",
            cancelLabel: "cancle이지요",
          }
        );
        dialog.open();

        dialog.onSubmit(() => {
          item.remove();
        });
      });

      const cn = new universe.DialogContent(
        `<section class="section"><p class="is-visible">Lorem out put en higher</p><button type="button" class="javascript">javascript</button></section>`
      );

      const la = new universe.Dialog({ title: null, allowClickOut: false });

      cn.appendChild(la);
      la.open();
      la.element.querySelector(".javascript").addEventListener("click", e => {
        la.element.querySelector(".is-visible").style.cssText =
          "display: none;";
      });
    </script>
  </body>
</html>
